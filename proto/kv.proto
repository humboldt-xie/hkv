syntax = "proto3";
package kv;


service Kv{
  rpc Set(SetRequest) returns (SetReply) {}
  rpc Get(GetRequest) returns (GetReply) {}
}

message Item {
	int64 Sequence=1;
	string Key=2;
	string Value=3;

}

// The request message containing the user's name.
message SetRequest{
  string Key  = 1;
  string Value= 2;
}

message GetRequest{
  string Key  = 1;
}


// The response message containing the greetings
message SetReply{
  string result= 1;
}

message GetReply {
	string Value = 1;
}



//  data service 
service Data{
	rpc Mirror(stream MirrorRequest) returns (stream MirrorResponse) {}
}

message Dataset {
	string Name=1;
	int64 Sequence=2;
}

message MirrorRequest {
	string Addr =1;
	map<string,Dataset> Dataset=2;
}

message MirrorResponse {
	string Command =1;
	string Dataset =2;
	Item   item =3;
}
